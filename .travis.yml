#
# Travis CI configuration
#
# Simply tests that Home Assistant configuration is valid.
#
# @link https://docs.travis-ci.com/user/tutorial/
# @link https://www.home-assistant.io/docs/ecosystem/backup/backup_github/#step-7-configuration-file-testing
#

# Select the base environment
language: python
python:
  - "3.7"

# Enable Travis caching of Python Packages (per branch)
cache: pip

# Prepare the CI environment to support Home Assistant
before_install:
  - mv secrets_travis.yaml secrets.yaml
  - touch home-assistant_v2.db
  - touch home-assistant.log
  - HA_VERSION=$(<.HA_VERSION)

# Install Home Assistant
install:
  - pip3 install homeassistant==${HA_VERSION}

# Test configuration files
script:
  - hass --script check_config --config . --files

notifications:
  webhooks:
    urls:
      secure: RNXSsvKC6YLzCHpvtwEpAPwy0U9sz+ylJ2/PpHmehp5KQ7dw/4JAYHVAyhT+p2+qCZuWaGbl5l7u4Gm9XCbR1cOnD6FPey1xqqzj8SKFO83IvrG4VqO9AnerVAqpm4mHbb9pbuNUyM6zIhmlLKhdTkP0Ei2a4bBsvJVy+VijBakt9QrPNLmsvcP91ODZ5IAQN7oUKCQRv35gkgIeIBJH/tbOXe0pJZnyhMEWO25e3iarafo+bu6T46QrC2LhymsV4hyaaKx7m9epvaoRrvjSYyIQQeMVMpYrmkxTEQKJ1uQ3BCjxmDWKRglFYDae23A0RL+zJ7lnKA1MpU1hTHEZj17z0Fq8zr8oxw5SkpyPO7GXucnV8hsJz4hHRJRmXeA74Jmf5y740VqMZk5pTxmL4ONW88WKmoqWfBeyJkFVYtow7HIW08Bi4MUq7zcn8qPYzkH6f7Sj1cEuFkasWTpeR5rWSJqwOn/9qPNaA9H+KP2GOYi/PyKinV0n1CLe6A3uyg+XngonQ8xz9R8c93izbnDgNsThKg4X2ApcJwtK57MANKaJ0/QWbza7VPVI5D5K11niibmND9mIkJEE3kTDjYm/6auhTzz/TYiEz2qyIYk5nA34NiSpckdV3tEZhdSkAkEy2U41Jtb9tHIUcFNjzvIzz3Yw+wnRIrC2M4Yhmks=
    on_success: always
    on_failure: always
    on_start:   always